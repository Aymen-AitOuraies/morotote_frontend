{"ast":null,"code":"// utils/cartUtils.js\nexport const saveCartToLocalStorage = cart => {\n  try {\n    const serializedCart = JSON.stringify(cart);\n    localStorage.setItem('cart', serializedCart);\n  } catch (e) {\n    console.error(\"Could not save cart\", e);\n  }\n};\nexport const loadCartFromLocalStorage = () => {\n  try {\n    const serializedCart = localStorage.getItem('cart');\n    if (serializedCart === null) return [];\n    const parsedCart = JSON.parse(serializedCart);\n    return parsedCart.map(item => ({\n      id: item.id,\n      title: item.title,\n      description: item.description,\n      price: item.price,\n      product_type: item.product_type,\n      available_sizes: item.available_sizes,\n      images: Array.isArray(item.images) ? item.images : [],\n      quantity: item.quantity || 1,\n      selectedSize: item.selectedSize || null,\n      selectedColor: item.selectedColor || null\n    }));\n  } catch (e) {\n    console.error(\"Could not load cart\", e);\n    return [];\n  }\n};\n\n// Helper function to validate cart item options\nexport const validateCartItem = item => {\n  const errors = {};\n\n  // Check if T-shirt has size selected\n  if (item.product_type === 'TSHIRT' && item.available_sizes) {\n    const availableSizes = item.available_sizes.split(',').map(size => size.trim()).filter(size => size.length > 0);\n    if (availableSizes.length > 0 && !item.selectedSize) {\n      errors.size = 'Size is required for T-shirts';\n    }\n  }\n\n  // Check if product has color options and color is selected\n  if (item.images && item.images.length > 0) {\n    const availableColors = item.images.filter(img => img.color && img.color.trim() !== '').map(img => img.color);\n    const uniqueColors = [...new Set(availableColors)];\n    if (uniqueColors.length > 0 && !item.selectedColor) {\n      errors.color = 'Color selection is required';\n    }\n  }\n  return errors;\n};\n\n// Helper function to get cart summary with validation status\nexport const getCartSummary = cart => {\n  const totalItems = cart.reduce((total, item) => total + item.quantity, 0);\n  const subtotal = cart.reduce((total, item) => {\n    const price = typeof item.price === 'string' ? parseFloat(item.price) : item.price;\n    return total + price * item.quantity;\n  }, 0);\n  const validationErrors = {};\n  let hasValidationErrors = false;\n  cart.forEach(item => {\n    const itemErrors = validateCartItem(item);\n    if (Object.keys(itemErrors).length > 0) {\n      validationErrors[item.id] = itemErrors;\n      hasValidationErrors = true;\n    }\n  });\n  return {\n    totalItems,\n    subtotal,\n    validationErrors,\n    hasValidationErrors,\n    isReadyForCheckout: !hasValidationErrors && cart.length > 0\n  };\n};","map":{"version":3,"names":["saveCartToLocalStorage","cart","serializedCart","JSON","stringify","localStorage","setItem","e","console","error","loadCartFromLocalStorage","getItem","parsedCart","parse","map","item","id","title","description","price","product_type","available_sizes","images","Array","isArray","quantity","selectedSize","selectedColor","validateCartItem","errors","availableSizes","split","size","trim","filter","length","availableColors","img","color","uniqueColors","Set","getCartSummary","totalItems","reduce","total","subtotal","parseFloat","validationErrors","hasValidationErrors","forEach","itemErrors","Object","keys","isReadyForCheckout"],"sources":["/goinfre/aait-our/morotote_frontend/src/cartUtils.js"],"sourcesContent":["// utils/cartUtils.js\nexport const saveCartToLocalStorage = (cart) => {\n  try {\n    const serializedCart = JSON.stringify(cart);\n    localStorage.setItem('cart', serializedCart);\n  } catch (e) {\n    console.error(\"Could not save cart\", e);\n  }\n};\n\nexport const loadCartFromLocalStorage = () => {\n  try {\n    const serializedCart = localStorage.getItem('cart');\n    if (serializedCart === null) return [];\n    \n    const parsedCart = JSON.parse(serializedCart);\n    return parsedCart.map(item => ({\n      id: item.id,\n      title: item.title,\n      description: item.description,\n      price: item.price,\n      product_type: item.product_type,\n      available_sizes: item.available_sizes,\n      images: Array.isArray(item.images) ? item.images : [],\n      quantity: item.quantity || 1,\n      selectedSize: item.selectedSize || null,\n      selectedColor: item.selectedColor || null\n    }));\n  } catch (e) {\n    console.error(\"Could not load cart\", e);\n    return [];\n  }\n};\n\n// Helper function to validate cart item options\nexport const validateCartItem = (item) => {\n  const errors = {};\n  \n  // Check if T-shirt has size selected\n  if (item.product_type === 'TSHIRT' && item.available_sizes) {\n    const availableSizes = item.available_sizes\n      .split(',')\n      .map(size => size.trim())\n      .filter(size => size.length > 0);\n    \n    if (availableSizes.length > 0 && !item.selectedSize) {\n      errors.size = 'Size is required for T-shirts';\n    }\n  }\n  \n  // Check if product has color options and color is selected\n  if (item.images && item.images.length > 0) {\n    const availableColors = item.images\n      .filter(img => img.color && img.color.trim() !== '')\n      .map(img => img.color);\n    \n    const uniqueColors = [...new Set(availableColors)];\n    if (uniqueColors.length > 0 && !item.selectedColor) {\n      errors.color = 'Color selection is required';\n    }\n  }\n  \n  return errors;\n};\n\n// Helper function to get cart summary with validation status\nexport const getCartSummary = (cart) => {\n  const totalItems = cart.reduce((total, item) => total + item.quantity, 0);\n  const subtotal = cart.reduce((total, item) => {\n    const price = typeof item.price === 'string' ? parseFloat(item.price) : item.price;\n    return total + (price * item.quantity);\n  }, 0);\n  \n  const validationErrors = {};\n  let hasValidationErrors = false;\n  \n  cart.forEach(item => {\n    const itemErrors = validateCartItem(item);\n    if (Object.keys(itemErrors).length > 0) {\n      validationErrors[item.id] = itemErrors;\n      hasValidationErrors = true;\n    }\n  });\n  \n  return {\n    totalItems,\n    subtotal,\n    validationErrors,\n    hasValidationErrors,\n    isReadyForCheckout: !hasValidationErrors && cart.length > 0\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}